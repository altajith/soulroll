<!DOCTYPE html>
<!--[if IEMobile 7 ]>    <html class="no-js iem7"> <![endif]-->
<!--[if (gt IEMobile 7)|!(IEMobile)]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8" />
        <title>Water Mobile</title>
        <meta name="description" content="" />
        <meta name="HandheldFriendly" content="True" />
        <meta name="MobileOptimized" content="320" />
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
        <!-- Cleartype for Windows Phone - uncomment below 1 line to apply-->
        <!--<meta http-equiv="cleartype" content="on">-->

        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/touch/apple-touch-icon-144x144-precomposed.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/touch/apple-touch-icon-114x114-precomposed.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/touch/apple-touch-icon-72x72-precomposed.png" />
        <link rel="apple-touch-icon-precomposed" href="images/touch/apple-touch-icon-57x57-precomposed.png" />
        <link rel="shortcut icon" href="images/touch/apple-touch-icon.png" />

        <!-- Tile icon for Win8 (144x144 + tile color)  - uncomment below 2 lines to apply-->
        <!--<meta name="msapplication-TileImage" content="images/touch/apple-touch-icon-144x144-precomposed.png">-->
        <!--<meta name="msapplication-TileColor" content="#222222">-->


        <!-- For iOS web apps. Delete if not needed. https://github.com/h5bp/mobile-boilerplate/issues/94 -->
        <!--
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-title" content="">
        -->

        <!-- This script prevents links from opening in Mobile Safari. https://gist.github.com/1042026 -->
        <!--
        <script>(function(a,b,c){if(c in b&&b[c]){var d,e=a.location,f=/^(a|html)$/i;a.addEventListener("click",function(a){d=a.target;while(!f.test(d.nodeName))d=d.parentNode;"href"in d&&(d.href.indexOf("http")||~d.href.indexOf(e.host))&&(a.preventDefault(),e.href=d.href)},!1)}})(document,window.navigator,"standalone")</script>
        -->
        
        <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:100,200,300,400' rel='stylesheet' type='text/css' />
        <link href='http://fonts.googleapis.com/css?family=Josefin+Sans:100,300' rel='stylesheet' type='text/css' />
        

        <link rel="stylesheet" href="css/normalize.css" />
        <!--<link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css">-->
        <link rel="stylesheet" href="css/jquery.mobile.structure-1.2.0.min.css" />
        <script src="js/vendor/modernizr-2.6.2.min.js"></script>
        <link rel="stylesheet" href="css/flexslider.css" />
        <link rel="stylesheet" href="css/photoswipe/photoswipe.css" />
        
        <link rel="stylesheet/less" href="css/main.css" />
        <script src="js/less-1.3.3.min.js"></script>
        
        
        <!--<script src="js/vendor/zepto.min.js"></script>-->

        <script src="js/jquery-1.8.2.min.js"></script>
        <script src="js/jquery.mobile-1.2.0.min.js"></script>
        <script src="js/helper.js"></script>
        <script src="js/jquery.flexslider-min.js"></script>
        <script src="js/photoswipe/klass.min.js"></script>
        <script src="js/photoswipe/code.photoswipe.jquery-3.0.5.min.js"></script>
        <script src="js/jquery.easyListSplitter.js"></script>
        <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
        
        <script src="js/forms.js"></script>
        <script src="js/main.js"></script>
        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            var _gaq=[["_setAccount","UA-XXXXX-X"],["_trackPageview"]];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
            g.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";
            s.parentNode.insertBefore(g,s)}(document,"script"));
        </script>
        
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /></head>
    <body class="my-body">
        <!-- Add your site or application content here -->
        <div id="gallery-page" class="page" data-theme="a" data-role="page">
            <div id="header" data-role="header">
                <div class="margpage">
                    <!--<h2>Water</h2>-->
                    <h1>Menu</h1>
                    <a href="index.html" class="menu-button left">=</a>
                </div>
            </div>
            <div class="ui-body margpage">
                
                <div class="gallery">
                    <ul id="menu_items">
                    </ul>
                </div>

            </div>
            
            
            <script type="text/javascript">
            
            function setHref(val_id){
            	window.location = "gallery-detail.html?item_id="+val_id;
            }
            
	//Load the menu list
	var output = $('#menu_items');
	$.ajax({
		url: 'http://www.councilofcoders.com/phonegap/get_menu_items.php',
		dataType: 'jsonp',
		jsonp: 'jsoncallback',
		timeout: 5000,
		success: function(data, status){
			$.each(data, function(i,item){ 
				var menu = '<li>'
                            +'<a onclick="setHref('+item.item_id+');" class="album-photo"  style="height:200px !important;">'
                               +' <span class="counter">'+(i+1)+'</span>'
                               +' <img src="'+item.item_image_path+'" style="height:100% !important;" alt="Album 1" />'
                          + '</a>'
                            +'<a class="album-detail group">'
                              +  '<span class="left"> '+item.item_name+' </span>'
                              + '<span class="right">  $'+item.price+'  </span>'
                           + '</a>'
                           
                              + '<span class="right"><input type="checkbox" onClick="change_the_cart('+item.item_id+');" class="squaredOne" id="chkbut'+item.item_id+'" /><lable id="chklbl'+item.item_id+'" class="lbl"><b>Check</b></lable>'
                              + '<select class="noOfItems" onchange="update_cart('+item.item_id+');" id="noItems'+item.item_id+'" >'
                              + 	'<option value="1">1</option>'
                              + 	'<option value="2">2</option>'
                              + 	'<option value="3">3</option>'
                              + 	'<option value="4">4</option>'
                              + 	'<option value="5">5</option>'
                              + 	'<option value="6">6</option>'
                              + 	'<option value="7">7</option>'
                              + 	'<option value="8">8</option>'
                              + 	'<option value="9">9</option>'
                              + 	'<option value="10">10</option>'
                              + '</select>'
                              +'</span>'
                        +'</li>';
				output.append(menu);
				check_item_available_in_cart(item.item_id);
			
			});
		},
		error: function(){
			output.text('There was an error loading the data.');
		}
	});
	
	function change_the_cart(uitem_id){
		if(document.getElementById("chkbut" + uitem_id).checked == true)
		{
			add_item(uitem_id);
		}
		else
		{
			remove_item(uitem_id);
		}
	}
	
	function add_item(uitem_id){
	var pass_id=uitem_id;
	var user_id = window.localStorage.getItem("user_id");
	var noItemsTemp = document.getElementById("noItems"+pass_id).value;
	$.ajax({
		type: 'GET',
		url: 'http://www.councilofcoders.com/phonegap/add_to_cart.php',
		data: { itm_id: uitem_id, usr_id: user_id,noItemsPass: noItemsTemp}, 
		dataType: 'jsonp',
		jsonp: 'jsoncallback',
		timeout: 5000,
		success: function(data, status){
				if(data.res == "1"){
					
					alert("Added to the cart;");
				}
		},
		error: function(){
			output.text('There was an error loading the data.');
		}
	});
	}
	
	function remove_item(uitem_id){
	var pass_id=uitem_id;
	var user_id = window.localStorage.getItem("user_id");
	$.ajax({
		type: 'GET',
		url: 'http://www.councilofcoders.com/phonegap/remove_from_cart.php',
		data: { itm_id: uitem_id, usr_id: user_id}, 
		dataType: 'jsonp',
		jsonp: 'jsoncallback',
		timeout: 5000,
		success: function(data, status){
				if(data.res == "1"){
					
					alert("Removed from the cart;");
				}
		},
		error: function(){
			output.text('There was an error loading the data.');
		}
	});
	}
	
	function check_item_available_in_cart(uitem_id){
	var pass_id=uitem_id;
	var user_id = window.localStorage.getItem("user_id");
	$.ajax({
		type: 'GET',
		url: 'http://www.councilofcoders.com/phonegap/check_cart.php',
		data: { itm_id: uitem_id, usr_id: user_id}, 
		dataType: 'jsonp',
		jsonp: 'jsoncallback',
		timeout: 50000000,
		success: function(data, status){
			if(data.res == "1")
			{
				
				document.getElementById('chkbut' + uitem_id).checked=true;
				document.getElementById('noItems' + uitem_id).value=data.noOfItems;
			}
			else
			{
				document.getElementById('chkbut' + uitem_id).checked=false;
			}
		},
		error: function(){
			output.text('There was an error loading the data.');
		}
	});
		
	}
	
	function update_cart(uitem_id){
	var pass_id=uitem_id;
	if(document.getElementById('chkbut' + pass_id).checked == true){
	var user_id = window.localStorage.getItem("user_id");
	var noItemsTemp = document.getElementById("noItems"+pass_id).value;
	$.ajax({
		type: 'GET',
		url: 'http://www.councilofcoders.com/phonegap/update_cart.php',
		data: { itm_id: uitem_id, usr_id: user_id,noItemsPass: noItemsTemp}, 
		dataType: 'jsonp',
		jsonp: 'jsoncallback',
		timeout: 5000,
		success: function(data, status){
				if(data.res == "1"){
					
					alert("Update the cart;");
				}
		},
		error: function(){
			output.text('There was an error loading the data.');
		}
	});
	}
	}
	
	function confirm_order(){
		window.location ="services.html";
	}
        </script>
   
                        <div id="footer" class="footer">
                <div class="padpage group">
                    <div class="social left ">
                        <ul class="child-left">
                            <li> <a href="#" class="twitter" title="Follow us on Twitter"></a> </li>
                            <li> <a href="#" class="facebook" title="Like us on Facebook"></a> </li>
                            <li> <a href="#" class="linkedin" title="Follow us on Linkedin"></a> </li>
                        </ul>
                    </div>
                    <div class="slogan right">
                        <input type="button" onclick="confirm_order();" style="background-color: #45484D; " value="Done" />
                    </div>
                </div>
            </div>            
        
        </div>
    </body>
</html>
